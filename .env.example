# =============================================================================
# MedicalCor Core - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
#
# PLUG & PLAY ARCHITECTURE:
# This platform supports multiple providers for each integration type.
# Change the *_PROVIDER variables to switch between providers without code changes.

# -----------------------------------------------------------------------------
# Application / Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
LOG_LEVEL=info
PORT=3000
HOST=0.0.0.0

# =============================================================================
# PLUG & PLAY PROVIDER SELECTION
# =============================================================================
# These variables control which provider is used for each integration type.
# The platform automatically loads the appropriate adapter based on these settings.

# Payment Gateway Provider: stripe | netopia | euplatesc | paytabs | mollie | banca_transilvania
PAYMENT_PROVIDER=stripe

# CRM Provider: hubspot | zoho | salesforce | pipedrive | freshsales
CRM_PROVIDER=hubspot

# AI/LLM Provider: openai | anthropic | azure_openai | groq | ollama | google_vertex
AI_PROVIDER=openai

# Voice Provider: vapi | twilio | bland | retell | vonage
VOICE_PROVIDER=vapi

# SMS Provider: twilio | vonage | messagebird | sinch
SMS_PROVIDER=twilio

# Messaging Provider: whatsapp_360dialog | whatsapp_twilio | whatsapp_meta | messenger | telegram
MESSAGING_PROVIDER=whatsapp_360dialog

# Scheduling Provider: internal | cal_com | calendly | acuity | simplybook | setmore
SCHEDULING_PROVIDER=internal

# -----------------------------------------------------------------------------
# Database (PostgreSQL via Supabase)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/medicalcor
SUPABASE_URL=
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# -----------------------------------------------------------------------------
# Docker Development Environment
# -----------------------------------------------------------------------------
# PostgreSQL credentials for docker-compose (required for local development)
POSTGRES_USER=medicalcor
POSTGRES_PASSWORD=
POSTGRES_DB=medicalcor
# Grafana admin credentials (required when using monitoring profile)
GF_ADMIN_USER=admin
GF_ADMIN_PASSWORD=

# -----------------------------------------------------------------------------
# HubSpot CRM
# -----------------------------------------------------------------------------
HUBSPOT_ACCESS_TOKEN=
HUBSPOT_PORTAL_ID=

# -----------------------------------------------------------------------------
# WhatsApp (360dialog) Configuration
# -----------------------------------------------------------------------------
WHATSAPP_API_KEY=
WHATSAPP_VERIFY_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_BUSINESS_ACCOUNT_ID=
# HMAC secret for webhook signature verification
WHATSAPP_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Voice (Twilio / Vapi)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
# Used for validating Twilio webhook signatures
TWILIO_WEBHOOK_URL=
VAPI_API_KEY=
# HMAC secret for Vapi webhook signature verification
VAPI_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Stripe Configuration (Payments)
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PUBLISHABLE_KEY=

# -----------------------------------------------------------------------------
# AI / LLM (OpenAI)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# RAG (Retrieval-Augmented Generation)
# State-of-the-art knowledge retrieval for AI-powered responses
# -----------------------------------------------------------------------------
# Enable/disable RAG for AI scoring and reply generation
RAG_ENABLED=true
# Embedding model: text-embedding-3-small (cost-effective) or text-embedding-3-large (highest quality)
RAG_EMBEDDING_MODEL=text-embedding-3-small
# Embedding dimensions (1536 for small, up to 3072 for large)
RAG_EMBEDDING_DIMENSIONS=1536
# Number of results to retrieve (top-K)
RAG_RETRIEVAL_TOP_K=5
# Minimum similarity threshold (0-1, higher = more relevant results)
RAG_SIMILARITY_THRESHOLD=0.7
# Maximum context tokens to include in AI prompts
RAG_MAX_CONTEXT_TOKENS=2000
# Weight for semantic search in hybrid mode (0-1)
RAG_SEMANTIC_WEIGHT=0.7
# Weight for keyword search in hybrid mode (0-1)
RAG_KEYWORD_WEIGHT=0.3
# Enable query logging for analytics and improvement
RAG_LOG_QUERIES=true

# -----------------------------------------------------------------------------
# Trigger.dev Configuration
# -----------------------------------------------------------------------------
TRIGGER_API_KEY=
TRIGGER_SECRET_KEY=
TRIGGER_API_URL=

# -----------------------------------------------------------------------------
# Redis Configuration (Rate Limiting)
# -----------------------------------------------------------------------------
REDIS_URL=

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGIN=

# -----------------------------------------------------------------------------
# Authentication (NextAuth.js)
# -----------------------------------------------------------------------------
# Secret for JWT signing (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=
# URL of the Next.js application
NEXTAUTH_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# User Authentication Configuration
# SECURITY: Users are configured via environment variables, not hardcoded.
# Password hashes should be generated with bcrypt (cost factor 12+)
# Example: npx bcryptjs hash "yourpassword" 12
# -----------------------------------------------------------------------------

# Primary admin user (required for initial setup)
AUTH_ADMIN_EMAIL=
# Generate with: npx bcryptjs hash "your-secure-password" 12
AUTH_ADMIN_PASSWORD_HASH=
AUTH_ADMIN_NAME=Administrator

# Additional users (optional, up to 20)
# Each user requires EMAIL, PASSWORD_HASH, NAME, ROLE, and optionally CLINIC_ID
# AUTH_USER_1_EMAIL=doctor@clinic.com
# AUTH_USER_1_PASSWORD_HASH=$2a$12$...
# AUTH_USER_1_NAME=Dr. Example
# AUTH_USER_1_ROLE=doctor
# AUTH_USER_1_CLINIC_ID=clinic_001

# AUTH_USER_2_EMAIL=reception@clinic.com
# AUTH_USER_2_PASSWORD_HASH=$2a$12$...
# AUTH_USER_2_NAME=Reception Staff
# AUTH_USER_2_ROLE=receptionist
# AUTH_USER_2_CLINIC_ID=clinic_001

# -----------------------------------------------------------------------------
# API Authentication
# -----------------------------------------------------------------------------
# Secret key for API authentication on workflow endpoints
# Generate with: openssl rand -base64 32
API_SECRET_KEY=

# -----------------------------------------------------------------------------
# ChatGPT Plugin / OpenAPI Configuration
# -----------------------------------------------------------------------------
# Base URL for API (used in OpenAPI spec and plugin manifest)
API_BASE_URL=https://api.medicalcor.io
# Verification token provided by OpenAI when registering the plugin
CHATGPT_VERIFICATION_TOKEN=

# -----------------------------------------------------------------------------
# Observability (Sentry)
# -----------------------------------------------------------------------------
# Backend Sentry DSN (for API errors)
SENTRY_DSN=

# Frontend Sentry DSN (for web app errors)
# Get this from: https://sentry.io/settings/[org]/projects/[project]/keys/
NEXT_PUBLIC_SENTRY_DSN=

# Sentry organization and project (for source map uploads)
SENTRY_ORG=
SENTRY_PROJECT=

# Sentry auth token (for CI/CD source map uploads)
# Generate at: https://sentry.io/settings/account/api/auth-tokens/
SENTRY_AUTH_TOKEN=

# Release tracking (automatically set by CI/CD)
# NEXT_PUBLIC_SENTRY_RELEASE=

# -----------------------------------------------------------------------------
# E2E Testing (Playwright)
# -----------------------------------------------------------------------------
# Test user credentials for automated E2E tests
TEST_USER_EMAIL=
TEST_USER_PASSWORD=
# Base URL for Playwright tests (defaults to http://localhost:3001)
PLAYWRIGHT_BASE_URL=http://localhost:3001

# =============================================================================
# ALTERNATIVE PROVIDER CONFIGURATIONS
# =============================================================================
# Configure these when using alternative providers (set the *_PROVIDER vars above)

# -----------------------------------------------------------------------------
# Netopia Payment (Romania) - PAYMENT_PROVIDER=netopia
# -----------------------------------------------------------------------------
# NETOPIA_MERCHANT_ID=
# NETOPIA_PUBLIC_KEY=
# NETOPIA_PRIVATE_KEY=
# NETOPIA_SANDBOX=true

# -----------------------------------------------------------------------------
# EuPlatesc Payment (Romania) - PAYMENT_PROVIDER=euplatesc
# -----------------------------------------------------------------------------
# EUPLATESC_MERCHANT_ID=
# EUPLATESC_KEY=
# EUPLATESC_SANDBOX=true

# -----------------------------------------------------------------------------
# PayTabs Payment (Middle East) - PAYMENT_PROVIDER=paytabs
# -----------------------------------------------------------------------------
# PAYTABS_PROFILE_ID=
# PAYTABS_SERVER_KEY=
# PAYTABS_REGION=ARE

# -----------------------------------------------------------------------------
# Mollie Payment (Europe) - PAYMENT_PROVIDER=mollie
# -----------------------------------------------------------------------------
# MOLLIE_API_KEY=

# -----------------------------------------------------------------------------
# Banca Transilvania (Romania) - PAYMENT_PROVIDER=banca_transilvania
# -----------------------------------------------------------------------------
# BT_API_KEY=
# BT_MERCHANT_ID=

# -----------------------------------------------------------------------------
# Zoho CRM - CRM_PROVIDER=zoho
# -----------------------------------------------------------------------------
# ZOHO_CLIENT_ID=
# ZOHO_CLIENT_SECRET=
# ZOHO_REFRESH_TOKEN=
# ZOHO_REGION=eu

# -----------------------------------------------------------------------------
# Salesforce CRM - CRM_PROVIDER=salesforce
# -----------------------------------------------------------------------------
# SALESFORCE_CLIENT_ID=
# SALESFORCE_CLIENT_SECRET=
# SALESFORCE_INSTANCE_URL=
# SALESFORCE_REFRESH_TOKEN=

# -----------------------------------------------------------------------------
# Pipedrive CRM - CRM_PROVIDER=pipedrive
# -----------------------------------------------------------------------------
# PIPEDRIVE_API_TOKEN=
# PIPEDRIVE_COMPANY_DOMAIN=

# -----------------------------------------------------------------------------
# Freshsales CRM - CRM_PROVIDER=freshsales
# -----------------------------------------------------------------------------
# FRESHSALES_API_KEY=
# FRESHSALES_DOMAIN=

# -----------------------------------------------------------------------------
# Anthropic AI (Claude) - AI_PROVIDER=anthropic
# -----------------------------------------------------------------------------
# ANTHROPIC_API_KEY=
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# -----------------------------------------------------------------------------
# Azure OpenAI - AI_PROVIDER=azure_openai
# -----------------------------------------------------------------------------
# AZURE_OPENAI_KEY=
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_DEPLOYMENT=gpt-4o
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# -----------------------------------------------------------------------------
# Groq AI (Fast Inference) - AI_PROVIDER=groq
# -----------------------------------------------------------------------------
# GROQ_API_KEY=
# GROQ_MODEL=llama-3.1-70b-versatile

# -----------------------------------------------------------------------------
# Ollama (Local/Self-hosted) - AI_PROVIDER=ollama
# -----------------------------------------------------------------------------
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama3

# -----------------------------------------------------------------------------
# Google Vertex AI - AI_PROVIDER=google_vertex
# -----------------------------------------------------------------------------
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
# GOOGLE_VERTEX_PROJECT=
# GOOGLE_VERTEX_LOCATION=us-central1

# -----------------------------------------------------------------------------
# Twilio Voice/SMS - VOICE_PROVIDER=twilio / SMS_PROVIDER=twilio
# -----------------------------------------------------------------------------
# (Already configured above in Voice section)

# -----------------------------------------------------------------------------
# Bland AI Voice - VOICE_PROVIDER=bland
# -----------------------------------------------------------------------------
# BLAND_API_KEY=
# BLAND_AGENT_ID=

# -----------------------------------------------------------------------------
# Retell AI Voice - VOICE_PROVIDER=retell
# -----------------------------------------------------------------------------
# RETELL_API_KEY=
# RETELL_AGENT_ID=

# -----------------------------------------------------------------------------
# Vonage Voice/SMS - VOICE_PROVIDER=vonage / SMS_PROVIDER=vonage
# -----------------------------------------------------------------------------
# VONAGE_API_KEY=
# VONAGE_API_SECRET=
# VONAGE_APPLICATION_ID=
# VONAGE_PRIVATE_KEY_PATH=

# -----------------------------------------------------------------------------
# MessageBird SMS - SMS_PROVIDER=messagebird
# -----------------------------------------------------------------------------
# MESSAGEBIRD_API_KEY=
# MESSAGEBIRD_ORIGINATOR=

# -----------------------------------------------------------------------------
# Sinch SMS - SMS_PROVIDER=sinch
# -----------------------------------------------------------------------------
# SINCH_API_KEY=
# SINCH_API_SECRET=
# SINCH_PROJECT_ID=

# -----------------------------------------------------------------------------
# Cal.com Scheduling - SCHEDULING_PROVIDER=cal_com
# -----------------------------------------------------------------------------
# CAL_COM_API_KEY=
# CAL_COM_EVENT_TYPE_ID=

# -----------------------------------------------------------------------------
# Calendly Scheduling - SCHEDULING_PROVIDER=calendly
# -----------------------------------------------------------------------------
# CALENDLY_API_KEY=
# CALENDLY_USER_URI=

# -----------------------------------------------------------------------------
# Acuity Scheduling - SCHEDULING_PROVIDER=acuity
# -----------------------------------------------------------------------------
# ACUITY_USER_ID=
# ACUITY_API_KEY=

# =============================================================================
# EXAMPLE: Multi-Tenant Configuration
# =============================================================================
# For SaaS deployments, you can configure different providers per tenant/clinic:
#
# Clinic A (Romania, Modern):
#   PAYMENT_PROVIDER=stripe
#   CRM_PROVIDER=hubspot
#   VOICE_PROVIDER=vapi
#   AI_PROVIDER=openai
#
# Clinic B (Romania, Traditional):
#   PAYMENT_PROVIDER=netopia
#   CRM_PROVIDER=zoho
#   VOICE_PROVIDER=twilio
#   AI_PROVIDER=openai
#
# Clinic C (Dubai):
#   PAYMENT_PROVIDER=paytabs
#   CRM_PROVIDER=salesforce
#   VOICE_PROVIDER=twilio
#   AI_PROVIDER=azure_openai  # For compliance
